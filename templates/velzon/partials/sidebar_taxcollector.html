{% load static %}
{% block sidebar %}
        <!-- ========== App Menu ========== -->
        <div class="app-menu navbar-menu">
            <!-- LOGO -->
            <div class="navbar-brand-box">
                <!-- Dark Logo-->
                <a href="/" class="logo logo-dark">
                    <span class="logo-sm">
                        <img src="{% static 'velzon/images/logo-sm.png'%}" alt="" height="22">
                    </span>
                    <span class="logo-lg">
                        <img src="{% static 'velzon/images/logo-dark.png'%}" alt="" height="17">
                    </span>
                </a>
                <!-- Light Logo-->
                <a href="/" class="logo logo-light">
                    <span class="logo-sm">
                        <img src="{% static 'velzon/images/logo-sm.png'%}" alt="" height="22">
                    </span>
                    <span class="logo-lg">
                        <img src="{% static 'velzon/images/logo-light.png'%}" alt="" height="17">
                    </span>
                </a>
                <button type="button" class="btn btn-sm p-0 fs-20 header-item float-end btn-vertical-sm-hover" id="vertical-hover">
                    <i class="ri-record-circle-line"></i>
                </button>
            </div>

            <div id="scrollbar">
                <div class="container-fluid">
                    
                    <div id="two-column-menu">
                    </div>
                    <ul class="navbar-nav" id="navbar-nav">
                        <li class="menu-title"><span data-key="t-menu">Menu</span></li>
                        
                        <!-- Dashboard -->
                        <li class="nav-item">
                            <a class="nav-link menu-link" href="{% url 'core:velzon_dashboard'%}">
                                <i class="ri-dashboard-2-line"></i> <span data-key="t-dashboards">Dashboards</span>
                            </a>
                        </li>

                        <!-- Vehicle Management -->
                        <li class="nav-item">
                            <a class="nav-link menu-link" href="#sidebarIndividualVehicles" data-bs-toggle="collapse" role="button"
                                aria-expanded="false" aria-controls="sidebarIndividualVehicles">
                                <i class="ri-car-line text-primary me-2"></i> <span data-key="t-vehicle-management">Véhicule Management</span>
                            </a>
                            <div class="collapse menu-dropdown" id="sidebarIndividualVehicles">
                                <ul class="nav nav-sm flex-column">
                                    {% if is_admin_user %}
                                        <!-- Admin view: All individual vehicles management -->
                                        <li class="nav-item">
                                            <a href="{% url 'administration:enhanced_vehicle_management' %}" class="nav-link" data-key="t-all-vehicles">
                                                <i class="ri-car-fill me-2"></i>Tous les Véhicules
                                            </a>
                                        </li>
                                        <li class="nav-item">
                                            <a href="{% url 'vehicles:vehicle_create' %}" class="nav-link" data-key="t-add-individual-vehicle">
                                                <i class="ri-add-circle-line me-2"></i>Ajouter Véhicule
                                            </a>
                                        </li>
                                        <li class="nav-item">
                                            <a href="{% url 'vehicles:vehicle_list' %}" class="nav-link" data-key="t-search-vehicles">
                                                <i class="ri-search-line me-2"></i>Rechercher Véhicules
                                            </a>
                                        </li>
                                    {% else %}
                                        <!-- Regular user view: Personal vehicles only -->
                                        <li class="nav-item">
                                            <a href="{% url 'vehicles:vehicle_list' %}" class="nav-link" data-key="t-my-vehicles">
                                                <i class="ri-car-fill me-2"></i>Mes Véhicules
                                            </a>
                                        </li>
                                        <li class="nav-item">
                                            <a href="{% url 'vehicles:vehicle_create' %}" class="nav-link" data-key="t-add-vehicle">
                                                <i class="ri-add-circle-line me-2"></i>Ajouter Véhicule
                                            </a>
                                        </li>
                                    {% endif %}
                                </ul>
                            </div>
                        </li>

                        <!-- Vehicle Types Management (Admin Only) -->
                        {% if is_admin_user %}
                        <li class="nav-item">
                            <a class="nav-link menu-link" href="#sidebarVehicleTypes" data-bs-toggle="collapse" role="button"
                                aria-expanded="false" aria-controls="sidebarVehicleTypes">
                                <i class="ri-settings-3-line text-success"></i> <span data-key="t-vehicle-types">Types de Véhicules</span>
                            </a>
                            <div class="collapse menu-dropdown" id="sidebarVehicleTypes">
                                <ul class="nav nav-sm flex-column">
                                    <li class="nav-item">
                                        <a href="{% url 'administration:vehicle_type_list' %}" class="nav-link" data-key="t-manage-types">
                                            <i class="ri-list-settings-line me-2"></i>Gérer les Types
                                        </a>
                                    </li>
                                    <li class="nav-item">
                                        <a href="{% url 'administration:vehicle_type_create' %}" class="nav-link" data-key="t-add-type">
                                            <i class="ri-add-box-line me-2"></i>Nouveau Type
                                        </a>
                                    </li>
                                    <li class="nav-item">
                                        <a href="{% url 'administration:vehicle_type_bulk_import' %}" class="nav-link" data-key="t-bulk-import">
                                            <i class="ri-upload-2-line me-2"></i>Import en Lot
                                        </a>
                                    </li>
                                </ul>
                            </div>
                        </li>
                        {% endif %}

                        <!-- Payments -->
                        <li class="nav-item">
                            <a class="nav-link menu-link" href="#sidebarPayments" data-bs-toggle="collapse" role="button"
                                aria-expanded="false" aria-controls="sidebarPayments">
                                <i class="ri-money-dollar-circle-line"></i> <span data-key="t-payments">Paiements</span>
                            </a>
                            <div class="collapse menu-dropdown" id="sidebarPayments">
                                <ul class="nav nav-sm flex-column">
                                    <li class="nav-item">
                                        <a href="{% url 'payments:list' %}" class="nav-link" data-key="t-payment-list">Liste des Paiements</a>
                                    </li>
                                </ul>
                            </div>
                        </li>

                        <!-- Administration -->
                        {% if is_admin_user %}
                        <li class="nav-item">
                            <a class="nav-link menu-link" href="#sidebarAdmin" data-bs-toggle="collapse" role="button"
                                aria-expanded="false" aria-controls="sidebarAdmin">
                                <i class="ri-settings-3-line"></i> <span data-key="t-administration">Administration</span>
                            </a>
                            <div class="collapse menu-dropdown" id="sidebarAdmin">
                                <ul class="nav nav-sm flex-column">
                                    <li class="nav-item">
                                        <a href="{% url 'administration:user_list' %}" class="nav-link" data-key="t-users">
                                            <i class="ri-user-settings-line me-2"></i>Utilisateurs
                                        </a>
                                    </li>
                                    <li class="nav-item">
                                        <a href="{% url 'administration:price_grid_list' %}" class="nav-link" data-key="t-tax-grids">
                                            <i class="ri-grid-line me-2"></i>Grilles Fiscales
                                        </a>
                                    </li>
                                    <li class="nav-item">
                                        <a href="{% url 'administration:stripe_config_manage' %}" class="nav-link" data-key="t-stripe-settings">
                                            <i class="ri-bank-card-line me-2"></i>Stripe Settings
                                        </a>
                                    </li>
                                </ul>
                            </div>
                        </li>
                        {% endif %}

                        <!-- Notifications -->
                        <li class="nav-item">
                            <a class="nav-link menu-link" href="{% url 'notifications:list' %}">
                                <i class="ri-notification-3-line"></i> <span data-key="t-notifications">Notifications</span>
                                {% if unread_notifications_count %}
                                <span class="badge badge-pill bg-danger">{{ unread_notifications_count }}</span>
                                {% endif %}
                            </a>
                        </li>

                        <!-- Reports -->
                        <li class="nav-item">
                            <a class="nav-link menu-link" href="#sidebarReports" data-bs-toggle="collapse" role="button"
                                aria-expanded="false" aria-controls="sidebarReports">
                                <i class="ri-file-chart-line"></i> <span data-key="t-reports">Rapports</span>
                            </a>
                            <div class="collapse menu-dropdown" id="sidebarReports">
                                <ul class="nav nav-sm flex-column">
                                    <li class="nav-item">
                                        <a href="#" class="nav-link" data-key="t-tax-reports">Rapports Fiscaux</a>
                                    </li>
                                    <li class="nav-item">
                                        <a href="#" class="nav-link" data-key="t-financial-reports">Rapports Financiers</a>
                                    </li>
                                    <li class="nav-item">
                                        <a href="#" class="nav-link" data-key="t-activity-reports">Rapports d'Activité</a>
                                    </li>
                                </ul>
                            </div>
                        </li>

                    </ul>
                </div>
                <!-- Sidebar -->
            </div>

            <div class="sidebar-background"></div>
        </div>
        <!-- Left Sidebar End -->
        <!-- Vertical Overlay-->
        <div class="vertical-overlay"></div>
{% endblock sidebar %}