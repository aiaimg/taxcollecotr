export const fr = {
  common: {
    valid: 'Valide',
    invalid: 'Invalide',
    paid: 'Payé',
    pending: 'En attente',
    yes: 'Oui',
    no: 'Non',
    close: 'Fermer',
  },
  login: {
    title: 'Agent de collecte des taxes',
    subtitle: 'Application de scan mobile',
    badgeId: 'ID de badge',
    badgeIdPlaceholder: 'Entrez votre ID de badge',
    pin: 'PIN',
    pinPlaceholder: 'Entrez votre PIN',
    invalidBadgeIdFormat: "Format d'ID de badge invalide",
    pinInvalid: 'Le PIN doit comporter 4 à 6 chiffres',
    loginFailedTitle: 'Échec de la connexion',
    loginFailedMessage: 'ID de badge ou PIN invalide',
    loginErrorTitle: 'Erreur de connexion',
    loginErrorMessage: "Une erreur inattendue s'est produite. Veuillez réessayer.",
    loggingIn: 'Connexion...',
    loginButton: 'Se connecter',
    helpText: "Contactez le support si vous avez besoin d'aide pour accéder à votre compte",
  },
  dashboard: {
    governmentAgent: 'Agent gouvernemental',
    partnerAgent: 'Agent partenaire',
    accessDeniedTitle: 'Accès refusé',
    accessDeniedMessage: 'Le scan est réservé aux agents gouvernementaux.',
    quickActions: 'Actions rapides',
    scan: 'Scanner',
    history: 'Historique',
    profile: 'Profil',
    statistics: 'Statistiques',
    totalScans: 'Nombre de scans',
    valid: 'Valides',
    invalid: 'Invalides',
    totalAmount: 'Montant total',
    recentScans: 'Scans récents',
    noRecentScans: 'Aucun scan récent',
    badge: 'Badge :',
    errorTitle: 'Erreur',
    logoutFailed: 'Échec de la déconnexion. Veuillez réessayer.',
  },
  scanner: {
    scanErrorTitle: 'Erreur de scan',
    scanErrorMessage: 'Échec du traitement du scan. Veuillez réessayer.',
    enterPlateTitle: "Entrer la plaque d'immatriculation",
    enterPlateMessage: 'Veuillez entrer le numéro de plaque :',
    cancel: 'Annuler',
    scan: 'Scanner',
    requestingPermission: "Demande d'autorisation de la caméra...",
    noCameraAccess: "Pas d'accès à la caméra",
    grantPermission: "Accorder l'autorisation",
    govOnly: 'Le scan est réservé aux agents gouvernementaux',
    headerText: 'Scanner un QR code, code-barres ou plaque',
    manualPlate: 'Plaque manuelle',
    processing: 'Traitement du scan...',
    resultTitle: 'Résultat du scan',
    type: 'Type :',
    data: 'Données :',
    valid: 'VALIDE',
    invalid: 'INVALIDE',
    insurance: 'Assurance',
    amountDue: 'Montant dû',
  },
  history: {
    title: 'Historique des scans',
    totalScans: '{count} scans au total',
    filterAll: 'Tous',
    filterValid: 'Valides',
    filterInvalid: 'Invalides',
    deleteTitle: 'Supprimer le scan',
    deleteMessage: 'Êtes-vous sûr de vouloir supprimer cet enregistrement de scan ?',
    cancel: 'Annuler',
    delete: 'Supprimer',
    statusValid: 'Valide',
    statusInvalid: 'Invalide',
    syncFailed: '⚠ Échec de la synchronisation',
    emptyTitle: 'Aucun scan',
    emptyTextAll: 'Commencez à scanner pour voir votre historique ici.',
    emptyTextFilter: 'Aucun scan {filter} trouvé.',
    loading: "Chargement de l'historique des scans...",
  },
  profile: {
    errorTitle: 'Erreur',
    logoutFailed: 'Échec de la déconnexion. Veuillez réessayer.',
    changePasswordTitle: 'Changer le mot de passe',
    changePasswordMessage: 'Cette fonctionnalité sera bientôt disponible.',
    contactSupportTitle: 'Contacter le support',
    contactSupportMessage: 'Veuillez contacter votre administrateur pour obtenir de l\'aide.',
    aboutTitle: 'À propos',
    aboutMessage: 'Application Agent de collecte des taxes v1.0.0',
    agentNotFound: 'Agent introuvable',
    governmentAgent: 'Agent gouvernemental',
    partnerAgent: 'Agent partenaire',
    infoSection: 'Informations agent',
    fullName: 'Nom complet',
    badgeId: 'ID de badge',
    email: 'Email',
    phone: 'Téléphone',
    accountCreated: 'Compte créé',
    permissionsSection: 'Permissions',
    scanning: 'Scan',
    scanningGov: 'Peut scanner des QR codes, des codes-barres et des plaques',
    scanningPartner: 'Peut voir les résultats de scan et les paiements',
    payments: 'Paiements',
    paymentsGov: 'Peut traiter les paiements de taxes et délivrer des reçus',
    paymentsPartner: "Peut voir l'historique et le statut des paiements",
    reports: 'Rapports',
    reportsGov: 'Peut générer des rapports et analyses détaillés',
    reportsPartner: 'Peut voir des statistiques et résumés basiques',
    full: 'Complet',
    limited: 'Limité',
    settingsSection: 'Paramètres',
    notifications: 'Notifications',
    autoSync: 'Synchronisation automatique',
    offlineMode: 'Mode hors ligne',
    actionsSection: 'Actions',
    logout: 'Se déconnecter',
  },
  detail: {
    headerTitle: 'Détails du scan',
    share: 'Partager',
    export: 'Exporter',
    scanInfo: 'Informations du scan',
    scanId: 'ID du scan :',
    typeLabel: 'Type :',
    dataLabel: 'Données :',
    timestamp: 'Horodatage :',
    agent: 'Agent :',
    location: 'Emplacement :',
    validationResult: 'Résultat de validation',
    reasonLabel: 'Raison :',
    warningsTitle: 'Avertissements :',
    vehicleInfo: 'Informations du véhicule',
    plateNumber: 'Numéro de plaque :',
    owner: 'Propriétaire :',
    vehicleType: 'Type de véhicule :',
    brand: 'Marque :',
    model: 'Modèle :',
    year: 'Année :',
    taxStatus: 'Statut fiscal :',
    insurance: 'Assurance :',
    amountDue: 'Montant dû :',
    lastTaxPayment: 'Dernier paiement de taxe :',
    synced: 'Synchronisé :',
    syncError: 'Erreur de synchro :',
    shareTitle: 'Partager le scan',
    shareMessage: 'Partager les détails du scan',
    exportTitle: 'Exporter le scan',
    exportMessage: 'Exporter les détails du scan',
    scanInformation: 'Informations du scan',
    syncInformation: 'Informations de synchronisation',
  },
  contraventions: {
    searchPlaceholder: 'Rechercher par ID ou détails...',
    filterAll: 'Tous',
    emptyText: 'Aucune contravention trouvée',
    newTitle: 'Nouvelle contravention',
    offender: 'Contrevenant',
    offenderPlaceholder: 'ID du contrevenant',
    offenseDetails: "Détails de l'infraction",
    offensePlaceholder: "Décrivez l'infraction",
    evidenceUri: "Lien/URI de la preuve",
    evidencePlaceholder: 'Ex: http://... ou file:///...',
    captureLocation: "Capturer l'emplacement",
    locationCaptured: 'Emplacement capturé',
    submit: 'Enregistrer',
    formInvalidTitle: 'Formulaire incomplet',
    formInvalidMessage: 'Veuillez remplir tous les champs requis et capturer la localisation.',
    createSuccessTitle: 'Contravention enregistrée',
    createSuccessMessage: 'La contravention a été créée avec succès.',
    detailTitle: 'Détails de la contravention',
    timestamp: 'Horodatage',
    location: 'Emplacement',
    status: 'Statut',
    evidence: 'Preuves',
    noEvidence: 'Aucune preuve jointe',
    void: 'Annuler',
    voidSuccessTitle: 'Contravention annulée',
    voidSuccessMessage: 'La contravention a été annulée avec succès.',
  },
  errors: {
    authenticationRequired: 'Authentification requise',
    invalidScanTypeGov: "Type de scan invalide pour un agent gouvernemental",
    partnerCannotScan: 'Les agents partenaires ne peuvent pas effectuer de scans',
    unsupportedScanType: 'Type de scan non pris en charge',
    scanFailed: 'Échec du scan',
    badRequest: 'Requête invalide',
    notFound: 'Ressource introuvable',
    requestSetup: 'Erreur de configuration de la requête',
    serverError: 'Erreur du serveur',
  },
} as const;

export const mg = {
  common: {
    valid: 'Mety',
    invalid: 'Tsy mety',
    paid: 'Voaloa',
    pending: 'Miandry',
    yes: 'Eny',
    no: 'Tsia',
    close: 'Atsahatra',
  },
  login: {
    title: 'Mpangataka hetra',
    subtitle: 'Fampiharana scan finday',
    badgeId: 'ID badge',
    badgeIdPlaceholder: 'Ampidiro ny ID badge-nao',
    pin: 'PIN',
    pinPlaceholder: 'Ampidiro ny PIN-nao',
    invalidBadgeIdFormat: 'Endrika ID badge tsy mety',
    pinInvalid: 'PIN tokony litera 4 hatramin\'ny 6',
    loginFailedTitle: 'Tsy nahomby ny fidirana',
    loginFailedMessage: 'ID badge na PIN diso',
    loginErrorTitle: 'Tsy mety ny fidirana',
    loginErrorMessage: 'Nisy lesoka nitranga. Avereno azafady.',
    loggingIn: 'Fidirana...',
    loginButton: 'Midira',
    helpText: 'Mifandraisa amin\'ny support raha mila fanampiana amin\'ny fidirana',
  },
  dashboard: {
    governmentAgent: 'Mpikambana governemanta',
    partnerAgent: 'Mpikambana mpiara-miombon\'antoka',
    accessDeniedTitle: 'Tsy ekena',
    accessDeniedMessage: 'Scan ho an\'ny mpikambana governemanta ihany.',
    quickActions: 'Asa haingana',
    scan: 'Scan',
    history: 'Tantara',
    profile: 'Mombamomba',
    statistics: 'Antontanisa',
    totalScans: 'Isan\'ny scan',
    valid: 'Mety',
    invalid: 'Tsy mety',
    totalAmount: 'Vola totaly',
    recentScans: 'Scan farany',
    noRecentScans: 'Tsy misy scan farany',
    badge: 'Badge:',
    errorTitle: 'Tsy mety',
    logoutFailed: 'Tsy afaka mivoaka. Avereno azafady.',
  },
  scanner: {
    scanErrorTitle: 'Tsy mety ny scan',
    scanErrorMessage: 'Tsy afaka nanontany ny scan. Avereno azafady.',
    enterPlateTitle: 'Ampidiro ny takelaka',
    enterPlateMessage: 'Ampidiro ny laharana takelaka:',
    cancel: 'Aoka ihany',
    scan: 'Scan',
    requestingPermission: 'Fangatahana alalana camera...',
    noCameraAccess: 'Tsy afaka mampiasa camera',
    grantPermission: 'Omeo alalana',
    govOnly: 'Scan ho an\'ny mpikambana governemanta ihany',
    headerText: 'Scan QR code, barcode na takelaka',
    manualPlate: 'Takelaka tanana',
    processing: 'Fandefasana scan...',
    resultTitle: 'Valin\'ny scan',
    type: 'Karazana:',
    data: 'Data:',
    valid: 'METY',
    invalid: 'TSY METY',
    insurance: 'Fiantohana',
    amountDue: 'Vola tokony aloa',
  },
  history: {
    title: 'Tantaran\'ny scan',
    totalScans: 'Scan {count} totaly',
    filterAll: 'Rehetra',
    filterValid: 'Mety',
    filterInvalid: 'Tsy mety',
    deleteTitle: 'Fafao ny scan',
    deleteMessage: 'Azo antoka ve fa te hafafa ity scan ity?',
    cancel: 'Aoka ihany',
    delete: 'Fafao',
    statusValid: 'Mety',
    statusInvalid: 'Tsy mety',
    syncFailed: '⚠ Tsy nahomby ny fifandraisana',
    emptyTitle: 'Tsy misy scan',
    emptyTextAll: 'Manomboka scan eto.',
    emptyTextFilter: 'Tsy nisy scan {filter} hita.',
    loading: 'Miandry tantaran\'ny scan...',
  },
  profile: {
    errorTitle: 'Tsy mety',
    logoutFailed: 'Tsy afaka mivoaka. Avereno azafady.',
    changePasswordTitle: 'Ovay ny teny miafina',
    changePasswordMessage: 'Hisy amin\'ny ho avy ity fitaovana ity.',
    contactSupportTitle: 'Mifandraisa amin\'ny support',
    contactSupportMessage: 'Mifandraisa amin\'ny mpitantana raha mila fanampiana.',
    aboutTitle: 'Momba',
    aboutMessage: 'Fampiharana Mpangataka hetra v1.0.0',
    agentNotFound: 'Tsy hita ny mpikambana',
    governmentAgent: 'Mpikambana governemanta',
    partnerAgent: 'Mpikambana mpiara-miombon\'antoka',
    infoSection: 'Momba ny mpikambana',
    fullName: 'Anarana feno',
    badgeId: 'ID badge',
    email: 'Email',
    phone: 'Telefaonina',
    accountCreated: 'Noforonina ny kaonty',
    permissionsSection: 'Alalana',
    scanning: 'Scan',
    scanningGov: 'Afaka scan QR codes, barcodes ary takelaka',
    scanningPartner: 'Afaka mahita valin\'ny scan sy fandoavam-bola',
    payments: 'Fandoavam-bola',
    paymentsGov: 'Afaka mandray fandoavam-bola sy mamorona tapakila',
    paymentsPartner: 'Afaka mahita tantara sy toe-javatra fandoavam-bola',
    reports: 'Tatitra',
    reportsGov: 'Afaka mamorona tatitra sy fanadihadiana manokana',
    reportsPartner: 'Afaka mahita antontanisa sy topy fototra',
    full: 'Feno',
    limited: 'Voafetra',
    settingsSection: 'Fikirana',
    notifications: 'Fampandrenesana',
    autoSync: 'Fampifandraisana ho azy',
    offlineMode: 'Tsy misy tambajotra',
    actionsSection: 'Asa',
    logout: 'Mivoaha',
  },
  detail: {
    headerTitle: 'Momba ny scan',
    share: 'Zaraina',
    export: 'Alefaso',
    scanInfo: 'Momba ny scan',
    scanId: 'ID scan:',
    typeLabel: 'Karazana:',
    dataLabel: 'Data:',
    timestamp: 'Daty sy ora:',
    agent: 'Mpikambana:',
    location: 'Toerana:',
    validationResult: 'Valin\'ny fanamarinana',
    reasonLabel: 'Antony:',
    warningsTitle: 'Fampitandremana:',
    vehicleInfo: 'Momba ny fiara',
    plateNumber: 'Laharana takelaka:',
    owner: 'Tompony:',
    vehicleType: 'Karazana fiara:',
    brand: 'Marika:',
    model: 'Modely:',
    year: 'Taona:',
    taxStatus: 'Toe-javatra hetra:',
    insurance: 'Fiantohana:',
    amountDue: 'Vola tokony aloa:',
    lastTaxPayment: 'Fandoavam-bola farany:',
    synced: 'Nampifandraisina:',
    syncError: 'Tsy mety ny fifandraisana:',
    shareTitle: 'Zaraina ny scan',
    shareMessage: 'Zaraina ny antsipiriany scan',
    exportTitle: 'Alefaso ny scan',
    exportMessage: 'Alefaso ny antsipiriany scan',
    scanInformation: 'Momba ny scan',
    syncInformation: 'Momba ny fifandraisana',
  },
  contraventions: {
    searchPlaceholder: 'Mitadiava amin\'ny ID na antsipiriany...',
    filterAll: 'Rehetra',
    emptyText: 'Tsy nisy contravention hita',
    newTitle: 'Contravention vaovao',
    offender: 'Mpandika lalàna',
    offenderPlaceholder: 'ID mpandika lalàna',
    offenseDetails: 'Antsipiriany ny heloka',
    offensePlaceholder: 'Lazao ny heloka',
    evidenceUri: 'Rohy/URI porofo',
    evidencePlaceholder: 'Ohatra: http://... na file:///...',
    captureLocation: 'Raketo ny toerana',
    locationCaptured: 'Voaraketo ny toerana',
    submit: 'Tehirizo',
    formInvalidTitle: 'Tsy feno ny form',
    formInvalidMessage: 'Fenoy azafady ny saha ilaina rehetra ary raketo ny toerana.',
    createSuccessTitle: 'Voatahiry ny contravention',
    createSuccessMessage: 'Vita soa aman-tsara ny famoronana contravention.',
    detailTitle: 'Momba ny contravention',
    timestamp: 'Daty sy ora',
    location: 'Toerana',
    status: 'Toe-javatra',
    evidence: 'Porofo',
    noEvidence: 'Tsy misy porofo nampiana',
    void: 'Aoka ihany',
    voidSuccessTitle: 'Voatsahatra ny contravention',
    voidSuccessMessage: 'Vita soa aman-tsara ny fanafoanana contravention.',
  },
  errors: {
    authenticationRequired: 'Ilaina ny fanamarinana',
    invalidScanTypeGov: 'Karazana scan tsy mety ho an\'ny mpikambana governemanta',
    partnerCannotScan: 'Tsy afaka scan ny mpikambana mpiara-miombon\'antoka',
    unsupportedScanType: 'Karazana scan tsy ekena',
    scanFailed: 'Tsy nahomby ny scan',
    badRequest: 'Fangatahana tsy mety',
    notFound: 'Tsy hita ilay zavatra',
    requestSetup: 'Tsy mety ny fametrahana fangatahana',
    serverError: 'Tsy mety ny serveur',
  },
} as const;

export type Language = 'fr' | 'mg';

let currentLanguage: Language = 'fr';

export const setLanguage = (lang: Language) => {
  currentLanguage = lang;
};

export const getLanguage = (): Language => {
  return currentLanguage;
};

function format(str: string, params?: Record<string, string | number>): string {
  if (!params) return str;
  return Object.keys(params).reduce(
    (acc, key) => acc.replace(new RegExp(`\\{${key}\\}`, 'g'), String(params[key])),
    str
  );
}

export function t(key: string, params?: Record<string, string | number>): string {
  const parts = key.split('.');
  const translations = currentLanguage === 'mg' ? mg : fr;
  let node: any = translations;
  
  for (const p of parts) {
    node = node?.[p];
    if (node === undefined) return key;
  }
  
  if (typeof node === 'string') return format(node, params);
  return key;
}
